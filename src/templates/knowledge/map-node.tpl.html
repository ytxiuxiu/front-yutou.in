<!-- without popover -->
<div class="node" ng-click="knowledge.showContent(child)" ng-class="{'dirty': child.dirty, 'have-one-child': child.children && child.children.length == 1, 'have-more-than-one-children': child.children && child.children.length > 1, 'have-small': child.small}">
  <div>
    <span ng-if="child.content && child.content !== ''" class="icon icon-text"></span>
    <input ng-if="knowledge.mode == 'edit'" type="text" dnd-nodrag pu-elastic-input class="name" ng-class="{'have-content': child.content && child.content !== ''}" ng-model="child.name" ng-change="knowledge.change(child)" placeholder="Node Name" required>
    <span ng-if="knowledge.mode == 'normal'">{{ child.name }}</span>
  </div>
  <div>
    <input ng-if="knowledge.mode == 'edit'" type="text" dnd-nodrag pu-elastic-input class="small" ng-model="child.small" ng-change="knowledge.change(child)" placeholder="Description">
    <span ng-if="knowledge.mode == 'normal' && child.small" class="small">{{ child.small }}</span>
  </div>
</div>
<!-- end without popover -->
<ul ng-if="child.children && knowledge.mode === 'edit'"
  dnd-list="child.children"
  ng-init="list = child.children"
  dnd-inserted="knowledge.drop(event, child, list, index)"
  ng-class="{'no-child': list.length == 0}"
  class="children">
  <li
    ng-repeat="child in list"
    dnd-draggable="child"
    dnd-effect-allowed="move"
    dnd-moved="list.splice($index, 1)"
    ng-include="'templates/knowledge/map-node.tpl.html'" 
    context-menu="knowledge.contextMenu"
    class="children-item"></li>
  <li class="children-item dndPlaceholder">
    <span class="icon-arrow-left"></span> Drop here
  </li>
</ul>
<ul ng-if="child.children && knowledge.mode === 'normal'"
  ng-init="list = child.children"
  ng-class="{'no-child': list.length == 0}"
  class="children">
  <li
    ng-repeat="child in list"
    ng-include="'templates/knowledge/map-node.tpl.html'" 
    context-menu="knowledge.contextMenu"
    class="children-item"></li>
</ul>